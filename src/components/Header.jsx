import { useState } from "react";

function Header() {
  const [nameValue, setNameValue] = useState("");
  const [formHidden, setFormHidden] = useState(false);

  const handleSubmit = (e) => {
    e.preventDefault();
    localStorage.setItem("nameUser", nameValue);
    setFormHidden(false);
  };

  const handleSaveName = (e) => {
    setNameValue(e.target.value);
  };

  const nameUser = localStorage.getItem("nameUser");

  return (
    <div className="m-10">
      <div className="flex relative">
        <h1 className="text-3xl font-bold">
          Hi,{" "}
          <span className={`${formHidden == true ? "hidden" : "visible"}`}>
            {nameUser ? nameUser : "Anonymous"}
          </span>
        </h1>
        <button
          className={`${
            formHidden == true ? "hidden" : "visible"
          }  rounded-md h-full ml-2`}
          onClick={() => setFormHidden(true)}
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clipPath="url(#clip0_403_3111)">
              <path
                d="M18.6562 0.930194L6.4642 13.1222C5.99855 13.5853 5.62938 14.1363 5.37808 14.743C5.12679 15.3498 4.99835 16.0004 5.0002 16.6572V18.0002C5.0002 18.2654 5.10556 18.5198 5.2931 18.7073C5.48063 18.8948 5.73499 19.0002 6.0002 19.0002H7.3432C7.99997 19.002 8.65057 18.8736 9.25736 18.6223C9.86415 18.371 10.4151 18.0019 10.8782 17.5362L23.0702 5.34419C23.6546 4.75836 23.9828 3.96467 23.9828 3.13719C23.9828 2.30972 23.6546 1.51602 23.0702 0.930194C22.4759 0.362088 21.6854 0.0450439 20.8632 0.0450439C20.041 0.0450439 19.2505 0.362088 18.6562 0.930194ZM21.6562 3.93019L9.4642 16.1222C8.90033 16.6826 8.13821 16.9981 7.3432 17.0002H7.0002V16.6572C7.00229 15.8622 7.31777 15.1001 7.8782 14.5362L20.0702 2.34419C20.2838 2.14015 20.5678 2.02629 20.8632 2.02629C21.1586 2.02629 21.4426 2.14015 21.6562 2.34419C21.8661 2.55471 21.984 2.83989 21.984 3.13719C21.984 3.4345 21.8661 3.71968 21.6562 3.93019Z"
                fill="#ffffff"
              />
              <path
                d="M23 8.979C22.7348 8.979 22.4804 9.08436 22.2929 9.27189C22.1054 9.45943 22 9.71379 22 9.979V15H18C17.2044 15 16.4413 15.3161 15.8787 15.8787C15.3161 16.4413 15 17.2044 15 18V22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7957 2 19V5C2 4.20435 2.31607 3.44129 2.87868 2.87868C3.44129 2.31607 4.20435 2 5 2H14.042C14.3072 2 14.5616 1.89464 14.7491 1.70711C14.9366 1.51957 15.042 1.26522 15.042 1C15.042 0.734784 14.9366 0.48043 14.7491 0.292893C14.5616 0.105357 14.3072 0 14.042 0L5 0C3.67441 0.00158786 2.40356 0.528882 1.46622 1.46622C0.528882 2.40356 0.00158786 3.67441 0 5L0 19C0.00158786 20.3256 0.528882 21.5964 1.46622 22.5338C2.40356 23.4711 3.67441 23.9984 5 24H16.343C16.9999 24.0019 17.6507 23.8735 18.2576 23.6222C18.8646 23.3709 19.4157 23.0017 19.879 22.536L22.535 19.878C23.0008 19.4149 23.37 18.864 23.6215 18.2572C23.873 17.6504 24.0016 16.9998 24 16.343V9.979C24 9.71379 23.8946 9.45943 23.7071 9.27189C23.5196 9.08436 23.2652 8.979 23 8.979ZM18.465 21.122C18.063 21.523 17.5547 21.8006 17 21.922V18C17 17.7348 17.1054 17.4804 17.2929 17.2929C17.4804 17.1054 17.7348 17 18 17H21.925C21.8013 17.5535 21.524 18.0609 21.125 18.464L18.465 21.122Z"
                fill="#ffffff"
              />
            </g>
            <defs>
              <clipPath id="clip0_403_3111">
                <rect width="24" height="24" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </button>
        <form
          onSubmit={handleSubmit}
          className={`${
            formHidden == true ? "visible" : "hidden"
          } flex absolute h-full left-12`}
        >
          <input
            type="text"
            value={nameValue}
            onChange={handleSaveName}
            className="h-full pl-2 rounded-md text-cyan-500"
            placeholder="Enter you name"
          />
          <button
            type="submit"
            className="grid place-items-center ml-2 h-full w-10 bg-cyan-500 rounded-md"
          >
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clipPath="url(#clip0_403_3140)">
                <path
                  d="M12.0001 9.99988C11.209 9.99988 10.4356 10.2345 9.77784 10.674C9.12005 11.1135 8.60736 11.7382 8.30461 12.4691C8.00186 13.2 7.92264 14.0043 8.07698 14.7802C8.23132 15.5562 8.61229 16.2689 9.1717 16.8283C9.73111 17.3877 10.4438 17.7687 11.2198 17.923C11.9957 18.0774 12.8 17.9981 13.5309 17.6954C14.2618 17.3926 14.8865 16.88 15.326 16.2222C15.7655 15.5644 16.0001 14.791 16.0001 13.9999C16.0001 12.939 15.5787 11.9216 14.8286 11.1715C14.0784 10.4213 13.061 9.99988 12.0001 9.99988ZM12.0001 15.9999C11.6046 15.9999 11.2179 15.8826 10.889 15.6628C10.5601 15.4431 10.3037 15.1307 10.1524 14.7652C10.001 14.3998 9.96138 13.9977 10.0386 13.6097C10.1157 13.2217 10.3062 12.8654 10.5859 12.5857C10.8656 12.306 11.222 12.1155 11.6099 12.0383C11.9979 11.9611 12.4 12.0007 12.7655 12.1521C13.1309 12.3035 13.4433 12.5598 13.6631 12.8887C13.8828 13.2176 14.0001 13.6043 14.0001 13.9999C14.0001 14.5303 13.7894 15.039 13.4143 15.4141C13.0393 15.7892 12.5306 15.9999 12.0001 15.9999Z"
                  fill="#FFFFFF"
                />
                <path
                  d="M22.536 4.12202L19.878 1.46402C19.4149 0.998362 18.8639 0.629199 18.2572 0.377902C17.6504 0.126605 16.9998 -0.00183456 16.343 1.97963e-05H5C3.67441 0.00160765 2.40356 0.528902 1.46622 1.46624C0.528882 2.40358 0.00158786 3.67443 0 5.00002L0 19C0.00158786 20.3256 0.528882 21.5965 1.46622 22.5338C2.40356 23.4711 3.67441 23.9984 5 24H19C20.3256 23.9984 21.5964 23.4711 22.5338 22.5338C23.4711 21.5965 23.9984 20.3256 24 19V7.65702C24.0019 7.00026 23.8734 6.34965 23.6221 5.74286C23.3708 5.13608 23.0017 4.58517 22.536 4.12202ZM17 2.08002V3.00002C17 3.79567 16.6839 4.55873 16.1213 5.12134C15.5587 5.68395 14.7956 6.00002 14 6.00002H10C9.20435 6.00002 8.44129 5.68395 7.87868 5.12134C7.31607 4.55873 7 3.79567 7 3.00002V2.00002H16.343C16.5643 2.00198 16.7847 2.02882 17 2.08002ZM22 19C22 19.7957 21.6839 20.5587 21.1213 21.1213C20.5587 21.6839 19.7956 22 19 22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7957 2 19V5.00002C2 4.20437 2.31607 3.44131 2.87868 2.8787C3.44129 2.31609 4.20435 2.00002 5 2.00002V3.00002C5.00159 4.32561 5.52888 5.59646 6.46622 6.5338C7.40356 7.47114 8.67441 7.99843 10 8.00002H14C15.2575 7.99612 16.4672 7.51768 17.3871 6.66038C18.3071 5.80308 18.8695 4.63011 18.962 3.37602L21.122 5.53602C21.6824 6.09989 21.9979 6.86201 22 7.65702V19Z"
                  fill="#FFFFFF"
                />
              </g>
              <defs>
                <clipPath id="clip0_403_3140">
                  <rect width="24" height="24" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </button>
          <button
            type="button"
            className="ml-2 h-full w-10 bg-red-500 rounded-md"
            onClick={() => setFormHidden(false)}
          >
            X
          </button>
        </form>
      </div>
      <p className="text-xl mt-5">
        Welcome to your{" "}
        <span className="font-bold text-cyan-500">
          expenses and income manager
        </span>
      </p>
    </div>
  );
}

export default Header;
